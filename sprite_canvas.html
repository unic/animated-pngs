<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Canvas</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <canvas class="canvas" id="canvas"></canvas>
    <script src="sprite_canvas.js"></script>
    <script>
        const animSpriteImage = new Image();

        animSpriteImage.addEventListener('load', function() {
            var animation = new SpriteAnim('canvas', true);

            let io = new IntersectionObserver(function(entries) {
               if (entries[0].isIntersecting) {
                animation.start({
                    frameWidth: 512,
                    frameHeight: 330,
                    image: animSpriteImage,
                    fps: 16.666,
                    loop: true
                });
              } else {
                 animation.stop();
              }
            });

            io.observe(document.getElementById('canvas'));
        });

        animSpriteImage.src = 'sprite.png';
    </script>
  </body>
</html>